<%- include("partials/header") %>
<link rel="stylesheet" href="/stylesheets/play.css" type="text/css">


<script src="/socket.io/socket.io.js"></script>


<!-- START MAIN CONTAINER -->
<div class="container-fluid">

<!-- START Vertically centered modal -->
<div class="modal fade show" id="myModal" tabindex="-1" aria-labelledby="exampleModalCenterTitle" style="padding-right: 15px; display: none;" aria-modal="true" role="dialog">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalCenterTitle">Set up a new game</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="/play/g/" method="POST">

          <div class="row flex-row" id="fullGameSettingsRow">
            <div class="col-md-12" id="mainGameSettingsColumn">
              <div class="form-group">
                <label class="mr-2" for="gameName">Game name:</label>
                <select name="gameName" id="gameName">
                  <option value="">--Choose--</option>
                  <option value="anaconda">Anaconda</option>
                  <option value="fourteenthStreet">Fourteenth Street</option>
                  <option value="goodBadUgly">The Good, the Bad, and the Ugly</option>
                  <option value="lowChicago">Low Chicago</option>
                  <option value="lowHoleCard">Low Hole Card</option>
                  <option value="sevenCardStud">Seven-Card Stud</option>
                  <option value="seven27">7-27</option>
                  <option value="highLow">High-Low</option>
                  <option value="dealersSpecial">Dealer's Special</option>
              </select>
              </div>
              <div class="form-group d-flex flex-row">
                <label class="mr-2" for="numCards">Number of cards dealt</label>
                <input type="number" class="form-control" id="numCards" name="numCards" value="7" min="5" max="7" step="1">
              </div>
              <div class="form-group">
                <div class="d-block my-3">
                  <p class="mb-3"><strong>High-Low</strong></p>
                  <div>
                    <input type="radio" id="HighOnlyRadio" name="hilo" value="High Only" checked>
                    <label for="HighOnlyRadio">High Only</label>
                  </div>
                  <div>
                    <input type="radio" id="HighLowRadio" name="hilo" value="High-Low">
                    <label for="HighLowRadio">High-Low</label>
                  </div>
                    <div>
                    <input type="radio" id="LowOnlyRadio" name="hilo" value="Low Only">
                    <label for="LowOnlyRadio">Low Only</label>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="mr-2" for="whatsWild">What's wild?</label>
                <input type="text" id="whatsWild" name="whatsWild" required size="40">
              </div>
              <!-- next up: two expandable/collapsible sections with checkboxes for whether we remodel, and whether we pass cards-->
              <!-- START pass cards subection -->
              <div class="custom-control custom-checkbox passCardsExpander">
                <input type="checkbox" class="custom-control-input" id="passCardsTrue" name="passCardsTrue">
                <label class="custom-control-label" for="passCardsTrue">Pass cards?</label>
              </div>
              <div id="passCardsOptions">
                <div class="form-group d-flex flex-row pt-2">
                  <label for="numCardsToPass">How many?</label>
                  <input type="number" class="form-control" id="numCardsToPass" name="numCardsToPass" value="3" min="0" max="4" step="1">
                </div>
                <div class="form-group">
                  <h5 class="mb-3">Direction</h5>
                  <div>
                    <input type="radio" id="fwdCardsToPassTrue" name="fwdCardsToPass" value="true" checked>
                    <label for="fwdCardsToPassTrue">Forward</label>
                    <small class="text-muted">to player with next higher number</small>
                  </div>
                  <div>
                    <input type="radio" id="fwdCardsToPassFalse" name="fwdCardsToPass" value="false">
                    <label for="fwdCardsToPassFalse">Backward</label>
                    <small class="text-muted">to player with next lower number</small>
                  </div>
                </div>
              </div>
              <!-- END pass cards subection -->
    
              <!-- START remodel subection -->
              <div class="custom-control custom-checkbox mt-2 remodelExpander">
                <input type="checkbox" class="custom-control-input" id="remodelTrue" name="remodelTrue">
                <label class="custom-control-label" for="remodelTrue">Remodel?</label>
              </div>
              <div id="remodelOptions">
                <div class="form-group d-flex flex-row pt-2">
                  <label for="numRemodels">Number of remodel rounds</label>
                  <input type="number" class="form-control" id="numRemodels" name="numRemodels" value="1" min="0" max="2" step="1">
                </div>
                <div class="form-group d-flex flex-row">
                  <label for="remodelCostFaceUp">Cost to swap face-up:</label>
                  <input type="number" class="form-control" id="remodelCostFaceUp" name="remodelCostFaceUp" value="0.10" min="0.05" max="0.25" step="0.05">
                </div>
                <div class="form-group d-flex flex-row">
                  <label for="remodelCostFaceDown">Cost to swap face-down:</label>
                  <input type="number" class="form-control mb-2" id="remodelCostFaceDown" name="remodelCostFaceDown" value="0.50" min="0.05" max="0.50" step="0.05">
                </div>
              </div>
              <!-- END remodel subection -->
              <div class="custom-control custom-checkbox mt-2" id="noPeek">
                <input type="checkbox" class="custom-control-input" id="peekAllowedFalse" name="peekAllowedFalse">
                <label class="custom-control-label" for="peekAllowedFalse">No peek</label>
              </div>              
              <div class="form-group d-flex flex-row mt-2">
                <label class="mr-2" for="numIndicatorCards">Number of shared/indicator cards</label>
                <input type="number" class="form-control" id="numIndicatorCards" name="numIndicatorCards" value="0" min="0" max="6" step="1">
              </div>
              <div class="form-group d-flex flex-row mt-2">
                <label class="mr-2" for="otherInstructions">Other Instructions:</label>
                <textarea id="otherInstructions" name="otherInstructions" rows="5" cols="33"></textarea>
              </div>

              <button type="button" class="btn btn-primary" id="checkSequenceButton">Check sequence</button>    
              <button type="submit" class="btn btn-success">Start game</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

            </div>
            <div class="col-md-6 collapsed" id="playSequenceEditor">
              <div>
                <p><strong>Check the game sequence</strong></p>
                <ul id="playSequenceList">
                  <!-- values will be added here via javascript-->
                </ul>
                <div class="form-group">
                  <label class="mr-2" for="addSequenceItem">Add an item:</label>
                  <select name="addSequenceItem" id="addSequenceItem">
                    <option value="">--Choose--</option>
                    <option value="dealFaceUp">Deal Face Up</option>
                    <option value="dealFaceDown">Deal Face Down</option>
                    <option value="dealPlayersChoice">Deal - Player's Choice</option>
                    <option value="offerCards">Offer Cards</option>
                    <option value="passCards">Pass Cards</option>
                    <option value="discard">Discard</option>
                    <option value="bet">Bet</option>
                    <option value="turnIndicator">Turn an indicator card</option>
                    <option value="declare">Declare</option>
                    <option value="remodel">Remodel</option>
                    <option value="rollOne">Roll cards (one player)</option>
                    <option value="rollAll">Roll a card (all)</option>
                    <option value="repeat">Repeat previous steps</option>
                </select>
                </div>
            </div>
            </div>
          </div>


        </form>  
      </div>
    </div>
  </div>
</div>
<!-- END vertically centered modal -->

    <!-- START jumbotron -->
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <div class="row flex-row justify-content-center">

          <div class="col col-12 col-md-2">
            <h2 class="display-5">Classic Stud Poker</h1>
            <ul class="lead">
              <li>7 cards</li>
              <li>Wild cards: none</li>
              <li>High only</li>
            </ul>
          </div>

          <div class="col col-12 col-md-5">
            <div class="card-body pile" id="dealPile">
            </div>
            <!-- START DEALING BUTTONS-->
            <form>
              <div class="row d-flex justify-content-around mx-2 my-3" id="dealingButtonsRow">
                  <div class="form-group col-md-3">
                    <button type="button" class="btn btn-primary" id="shuffleButton">Shuffle</button>
                  </div>
                  <div class="form-group col-md-3">
                    <button type="button" class="btn btn-primary" id="dealFaceUpButton">Deal Face Up</button>
                  </div>
                  <div class="form-group col-md-3">
                    <button type="button" class="btn btn-primary" id="dealFaceDownPeekButton">Deal Face Down w/Peek</button>
                  </div>
                  <div class="form-group col-md-3">
                    <button type="button" class="btn btn-primary" id="dealFaceDownNoPeekButton">Deal Face Down No Peek</button>
                  </div>
              </div>
              </form>
              <!-- END DEALING BUTTONS-->
          </div>

          <div class="col col-12 col-md-5">
            <h4 class="mb-3">
              <span class="text-muted">Betting</span>
            </h4>
            <ul class="list-group" id="bettingDisplayList">
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Player 1</h6>
                </div>
                <span class="text-muted">$0.00</span>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Player 2</h6>
                </div>
                <span class="text-muted">$0.00</span>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Player 3</h6>
                </div>
                <span class="text-muted">$0.00</span>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Player 4</h6>
                </div>
                <span class="text-muted">$0.00</span>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Player 5</h6>
                </div>
                <span class="text-muted">$0.00</span>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Player 6</h6>
                </div>
                <span class="text-muted">$0.00</span>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Player 7</h6>
                </div>
                <span class="text-muted">$0.00</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <span><strong>Pot</strong></span>
                <strong>$0.00</strong>
              </li>
            </ul>
            <!-- START BETTING BUTTONS-->
            <form>
            <div class="row d-flex justify-content-around mx-2 my-3" id="bettingButtonsRow">
              <div class="form-group col-md-3">
                <button type="button" class="btn btn-primary" id="callButton">Call</button>                  
              </div>
              <div class="d-flex flex-row form-group col-md-6">
                <button type="button" class="btn btn-success" id="raiseButton">Raise</button> 
                <select id="raiseAmt" class="form-control">
                  <option>.05</option>
                  <option>.10</option>
                  <option>.15</option>
                  <option>.20</option>
                  <option>.25</option>
                </select>                  
              </div>
              <div class="form-group col-md-3">
                <button type="button" class="btn btn-secondary" id="foldButton">Fold</button>                  
              </div>



            </div>
            </form>
            <!-- END BETTING BUTTONS-->
          </div>

        </div>

      </div>
  </div>
  <!-- END jumbotron -->



<!-- START CONTAINER FOR ALL PLAYERS -->

        <!-- START playersRow1 -->
        <div class=" playerRow row flex-row justify-content-center" id="playersRow1">
          <% if (tonight.tonightPlayers.length>0){ %>
          <div class="col col-12 col-md-3 playerArea" id="player1Area">
            <p>Player 1: <%= tonight.tonightPlayers[0].playerUser.firstName %></p>
            <div class="card-body rowOfCards">
              <div class="cardSingle rounded"><img src="../images/cards/as.png"></div>
              <div class="cardSingle rounded"><img src="../images/cards/2s.png"></div>
              <div class="cardSingle rounded"><img src="../images/cards/3s.png"></div>
            </div>
          </div>
          <% }  %>
          <% if (tonight.tonightPlayers.length>1){ %>
          <div class="col col-12 col-md-3 playerArea" id="player2Area">
            <p>Player 2: <%= tonight.tonightPlayers[1].playerUser.firstName %></p>
            <div class="card-body rowOfCards">
              <div class="cardSingle rounded"><img src="../images/cards/as.png"></div>
              <div class="cardSingle rounded"><img src="../images/cards/2s.png"></div>
              <div class="cardSingle rounded"><img src="../images/cards/3s.png"></div>
            </div>
          </div>
          <% }  %>
          <% if (tonight.tonightPlayers.length>2){ %>
          <div class="col col-12 col-md-3 playerArea" id="player3Area">
            <p>Player 3: <%= tonight.tonightPlayers[2].playerUser.firstName %></p>
            <div class="card-body rowOfCards">
              <div class="cardSingle rounded"><img src="../images/cards/as.png"></div>
              <div class="cardSingle rounded"><img src="../images/cards/2s.png"></div>
              <div class="cardSingle rounded"><img src="../images/cards/3s.png"></div>
            </div>
          </div>
          <% }  %>          
        </div> 
        <!-- END playersRow1 -->


        <!-- START playersRow2 -->
        <div class="playerRow row flex-row-reverse justify-content-center" id="playersRow2"> 
          <% if (tonight.tonightPlayers.length>3){ %>
            <div class="col col-12 col-md-3 playerArea" id="player4Area">
              <p>Player 4: <%= tonight.tonightPlayers[3].playerUser.firstName %></p>
              <div class="card-body rowOfCards">
                <div class="cardSingle rounded"><img src="../images/cards/as.png"></div>
                <div class="cardSingle rounded"><img src="../images/cards/2s.png"></div>
                <div class="cardSingle rounded"><img src="../images/cards/3s.png"></div>
              </div>
            </div>
            <% }  %>
            <% if (tonight.tonightPlayers.length>4){ %>
              <div class="col col-12 col-md-3 playerArea" id="player5Area">
                <p>Player 5: <%= tonight.tonightPlayers[4].playerUser.firstName %></p>
                <div class="card-body rowOfCards">
                  <div class="cardSingle rounded"><img src="../images/cards/as.png"></div>
                  <div class="cardSingle rounded"><img src="../images/cards/2s.png"></div>
                  <div class="cardSingle rounded"><img src="../images/cards/3s.png"></div>
                </div>
              </div>
              <% }  %>
              <% if (tonight.tonightPlayers.length>5){ %>
                <div class="col col-12 col-md-3 playerArea" id="player6Area">
                  <p>Player 6: <%= tonight.tonightPlayers[5].playerUser.firstName %></p>
                  <div class="card-body rowOfCards">
                    <div class="cardSingle rounded"><img src="../images/cards/as.png"></div>
                    <div class="cardSingle rounded"><img src="../images/cards/2s.png"></div>
                    <div class="cardSingle rounded"><img src="../images/cards/3s.png"></div>
                  </div>
                </div>
                <% }  %>
                <% if (tonight.tonightPlayers.length>6){ %>
                  <div class="col col-12 col-md-3 playerArea" id="player7Area">
                    <p>Player 7: <%= tonight.tonightPlayers[6].playerUser.firstName %></p>
                    <div class="card-body rowOfCards">
                      <div class="cardSingle rounded"><img src="../images/cards/as.png"></div>
                      <div class="cardSingle rounded"><img src="../images/cards/2s.png"></div>
                      <div class="cardSingle rounded"><img src="../images/cards/3s.png"></div>
                    </div>
                  </div>
                  <% }  %>
        </div>
        <!-- END playersRow2 -->

<!-- END CONTAINER FOR ALL PLAYERS -->

<!-- START COLLAPSIBLE CHAT MESSAGES CARD-->
<div class="accordion" id="chatMessagesAccordion">
  <div class="card text-center">
    <div class="card-header" id="chatMessagesHeader">
      <h2 class="mb-0">
        <button class="btn btn-link btn-block text-center" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Show/Hide
        </button>
      </h2>
    </div>
    <div id="collapseOne" class="collapse show" aria-labelledby="chatMessagesHeader" data-parent="#chatMessagesAccordion">
      <div class="card-body">
        <ul id="statusUpdates"><li>Status updates will appear here.</li></ul>
        <ul id="chatMessages"><li>Chat messages will appear here.</li></ul>
        <form id="chatForm" action="">
          <input type="text" id="chatInput" autocomplete="off">
          <button>Send</button>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- END COLLAPSIBLE CHAT MESSAGES CARD-->




</div>
<!-- END OF MAIN CONTAINER -->

<script src="/scripts/clientSocket.js"></script>

<%- include("partials/footer") %>